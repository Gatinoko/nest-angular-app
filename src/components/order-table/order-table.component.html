<div class="p-4 sm:p-8">
  <!-- Loading State -->
  @if (isLoading()) {
  <div class="text-center py-12 text-indigo-600 font-medium">
    <svg class="animate-spin h-6 w-6 mr-3 inline-block" viewBox="0 0 24 24">
      <circle
        class="opacity-25"
        cx="12"
        cy="12"
        r="10"
        stroke="currentColor"
        stroke-width="4"
      ></circle>
      <path
        class="opacity-75"
        fill="currentColor"
        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
      ></path>
    </svg>
    Loading orders...
  </div>
  }

  <!-- Error State -->
  @if (error()) {
  <div
    class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-xl relative mb-6"
    role="alert"
  >
    <strong class="font-bold">Error! </strong>
    <span class="block sm:inline">{{ error() }}</span>
  </div>
  }

  <!-- Empty State -->
  @if (!isLoading() && orders().length === 0 && !error()) {
  <div
    class="text-center py-12 bg-white rounded-xl border border-dashed border-gray-300"
  >
    <p class="text-gray-500 text-lg">No orders found yet.</p>
    <button
      (click)="fetchOrders()"
      class="mt-4 text-indigo-600 hover:text-indigo-800 font-medium transition"
    >
      Try Reloading
    </button>
  </div>
  }

  <!-- Order Table -->
  @if (orders().length > 0 && !isLoading()) {
  <div class="overflow-x-auto shadow-2xl rounded-xl border border-gray-200">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-100">
        <tr>
          <th
            scope="col"
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            ID
          </th>
          <th
            scope="col"
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            Product
          </th>
          <th
            scope="col"
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            Total
          </th>
          <th
            scope="col"
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            Status
          </th>
          <th
            scope="col"
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            Customer
          </th>
          <th
            scope="col"
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            Actions
          </th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        @for (order of orders(); track order.id) {
        <tr [class.bg-gray-50]="$index % 2 !== 0">
          <td
            class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
          >
            {{ order.id }}
          </td>
          <td
            class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
          >
            {{ order.product }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
            ${{ order.totalAmount | number : "1.2-2" }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span [class]="getStatusClasses(order.status)">
              {{ order.status }}
            </span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
            {{ this.authService.currentUser()?.email || "N/A" }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
            <button
              [routerLink]="`update-order/${order.id}`"
              class="text-indigo-600 hover:text-indigo-900 transition mr-3 text-xs sm:text-sm"
            >
              Edit
            </button>
            <button
              (click)="deleteOrder(order.id)"
              class="text-red-600 hover:text-red-900 transition text-xs sm:text-sm"
            >
              Delete
            </button>
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>
  }
</div>
